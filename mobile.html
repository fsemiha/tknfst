<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Siber GÃ¼venlik Oyunu - Mobil</title>
    <link rel="stylesheet" href="mobile.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2d1b69">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="preload" href="fonts/Gilmer Bold.otf" as="font" type="font/otf" crossorigin>
</head>
<body>
    <!-- MOBIL OYUN CONTAINER -->
    <div class="mobile-game-container" id="mobile-game">
        
        <!-- BAÅLANGIÃ‡ EKRANI -->
        <section class="mobile-screen active" id="start-screen">
            <div class="mobile-header">
                <img src="assets/Asset 5.svg" alt="Logo" class="mobile-logo">
                <h1>SÄ°BER GÃœVENLÄ°K</h1>
                <p>Teknofest Mobil Versiyonu</p>
            </div>
            
            <div class="mobile-input-section">
                <input type="text" id="mobile-player-name" placeholder="Ä°sminizi girin..." class="mobile-input">
                <button onclick="startMobileGame()" class="mobile-btn primary">BAÅLA</button>
            </div>
            
            <div class="mobile-info">
                <p>ğŸ“± Mobil optimize edildi</p>
                <p>ğŸ† PC ile aynÄ± skor tablosu</p>
            </div>
        </section>

        <!-- PAROLA GÃœCÃœ EKRANI -->
        <section class="mobile-screen" id="password-screen">
            <div class="mobile-header">
                <h2>ğŸ” PAROLA GÃœCÃœ</h2>
                <p>GÃ¼Ã§lÃ¼ parola oluÅŸturun</p>
            </div>
            
            <div class="mobile-content">
                <div class="mobile-input-group">
                    <label>Parola girin:</label>
                    <input type="password" id="mobile-password1" class="mobile-input" placeholder="ParolanÄ±z...">
                    <div class="mobile-strength-indicator" id="mobile-strength1">
                        <div class="strength-bar"></div>
                        <span class="strength-text">Parola girin</span>
                    </div>
                </div>
                
                <div class="mobile-input-group">
                    <label>ParolayÄ± tekrar girin:</label>
                    <input type="password" id="mobile-password2" class="mobile-input" placeholder="Tekrar...">
                    <div class="mobile-strength-indicator" id="mobile-strength2">
                        <div class="strength-bar"></div>
                        <span class="strength-text">Parola girin</span>
                    </div>
                </div>
                
                <button onclick="checkPasswords()" class="mobile-btn primary">KONTROL ET</button>
                <button onclick="nextScreen('phishing-screen')" class="mobile-btn secondary">SONRAKÄ° â†’</button>
            </div>
        </section>

        <!-- OLTALAMA TESTÄ° EKRANI -->
        <section class="mobile-screen" id="phishing-screen">
            <div class="mobile-header">
                <h2>ğŸ£ OLTALAMA TESTÄ°</h2>
                <p>Sahte e-postalarÄ± tanÄ±yÄ±n</p>
            </div>
            
            <div class="mobile-content">
                <div class="mobile-question" id="mobile-phishing-question">
                    <p class="question-text">Bu e-posta gÃ¼venli mi?</p>
                    <div class="phishing-example">
                        <div class="email-preview">
                            <h4>ğŸš¨ ACÄ°L: HesabÄ±nÄ±z kapatÄ±lacak!</h4>
                            <p>SayÄ±n kullanÄ±cÄ±, hesabÄ±nÄ±z 24 saat iÃ§inde kapatÄ±lacaktÄ±r. Hemen tÄ±klayÄ±n!</p>
                            <button class="fake-link">BURAYA TIKLAYIN</button>
                        </div>
                    </div>
                </div>
                
                <div class="mobile-answers">
                    <button onclick="selectAnswer('safe')" class="mobile-answer-btn">âœ… GÃœVENLÄ°</button>
                    <button onclick="selectAnswer('unsafe')" class="mobile-answer-btn">âŒ TEHLÄ°KELÄ°</button>
                </div>
                
                <button onclick="nextScreen('share-screen')" class="mobile-btn secondary">SONRAKÄ° â†’</button>
            </div>
        </section>

        <!-- PAYLAÅ/SAKLA EKRANI -->
        <section class="mobile-screen" id="share-screen">
            <div class="mobile-header">
                <h2>ğŸ¤ PAYLAÅ/SAKLA</h2>
                <p>Hangi bilgiyi paylaÅŸÄ±rsÄ±n?</p>
            </div>
            
            <div class="mobile-content">
                <div class="mobile-question">
                    <p class="question-text">Sosyal medyada paylaÅŸÄ±r mÄ±sÄ±n?</p>
                </div>
                
                <div class="share-options">
                    <div class="share-item">
                        <p>ğŸ“± Telefon numarasÄ±</p>
                        <div class="share-buttons">
                            <button onclick="shareAnswer('phone', 'share')" class="mobile-btn small green">PAYLAÅ</button>
                            <button onclick="shareAnswer('phone', 'hide')" class="mobile-btn small red">SAKLA</button>
                        </div>
                    </div>
                    
                    <div class="share-item">
                        <p>ğŸ  Ev adresi</p>
                        <div class="share-buttons">
                            <button onclick="shareAnswer('address', 'share')" class="mobile-btn small green">PAYLAÅ</button>
                            <button onclick="shareAnswer('address', 'hide')" class="mobile-btn small red">SAKLA</button>
                        </div>
                    </div>
                    
                    <div class="share-item">
                        <p>ğŸ‚ DoÄŸum tarihi</p>
                        <div class="share-buttons">
                            <button onclick="shareAnswer('birthday', 'share')" class="mobile-btn small green">PAYLAÅ</button>
                            <button onclick="shareAnswer('birthday', 'hide')" class="mobile-btn small red">SAKLA</button>
                        </div>
                    </div>
                </div>
                
                <button onclick="finishGame()" class="mobile-btn primary">OYUNU BÄ°TÄ°R</button>
            </div>
        </section>

        <!-- SONUÃ‡ EKRANI -->
        <section class="mobile-screen" id="result-screen">
            <div class="mobile-header">
                <h2>ğŸ† SONUÃ‡</h2>
                <p>Tebrikler!</p>
            </div>
            
            <div class="mobile-content">
                <div class="score-display">
                    <div class="score-circle">
                        <span class="score-number" id="final-score">85</span>
                        <span class="score-text">PUAN</span>
                    </div>
                </div>
                
                <div class="score-breakdown">
                    <div class="score-item">
                        <span>Parola GÃ¼cÃ¼:</span>
                        <span id="password-score">30/30</span>
                    </div>
                    <div class="score-item">
                        <span>Oltalama:</span>
                        <span id="phishing-score">25/30</span>
                    </div>
                    <div class="score-item">
                        <span>Gizlilik:</span>
                        <span id="privacy-score">30/40</span>
                    </div>
                </div>
                
                <button onclick="showScoreboard()" class="mobile-btn primary">SKOR TABLOSU</button>
                <button onclick="restartGame()" class="mobile-btn secondary">YENÄ°DEN OYNA</button>
            </div>
        </section>

        <!-- SKOR TABLOSU -->
        <section class="mobile-screen" id="scoreboard-screen">
            <div class="mobile-header">
                <h2>ğŸ† SKOR TABLOSU</h2>
                <p>En iyi oyuncular</p>
            </div>
            
            <div class="mobile-content">
                <div class="scoreboard-list" id="mobile-scoreboard">
                    <!-- Firebase'den gelecek -->
                </div>
                
                <button onclick="restartGame()" class="mobile-btn primary">YENÄ° OYUN</button>
            </div>
        </section>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // MOBÄ°L OYUN LOGÄ°ÄÄ°
        let currentScreen = 'start-screen';
        let playerName = '';
        let gameScore = {
            password: 0,
            phishing: 0,
            privacy: 0,
            total: 0
        };

        // Firebase baÄŸlantÄ±sÄ±
        const database = firebase.database();

        function startMobileGame() {
            playerName = document.getElementById('mobile-player-name').value.trim();
            if (!playerName) {
                alert('LÃ¼tfen isminizi girin!');
                return;
            }
            nextScreen('password-screen');
        }

        function nextScreen(screenId) {
            // Mevcut ekranÄ± gizle
            document.querySelector('.mobile-screen.active').classList.remove('active');
            // Yeni ekranÄ± gÃ¶ster
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function checkPasswords() {
            const pass1 = document.getElementById('mobile-password1').value;
            const pass2 = document.getElementById('mobile-password2').value;
            
            if (!pass1 || !pass2) {
                alert('LÃ¼tfen her iki parolayÄ± da girin!');
                return;
            }
            
            if (pass1 !== pass2) {
                alert('Parolalar eÅŸleÅŸmiyor!');
                return;
            }
            
            // Parola gÃ¼cÃ¼ hesapla
            const result = zxcvbn(pass1);
            const score = (result.score + 1) * 6; // 0-4 arasÄ± skoru 6-30 arasÄ± yap
            gameScore.password = score;
            
            alert(`Parola gÃ¼cÃ¼: ${score}/30 puan`);
            updateStrengthDisplay(result.score);
        }

        function updateStrengthDisplay(score) {
            const colors = ['#ff4444', '#ff8800', '#ffaa00', '#88dd00', '#00dd44'];
            const texts = ['Ã‡ok ZayÄ±f', 'ZayÄ±f', 'Orta', 'Ä°yi', 'MÃ¼kemmel'];
            
            document.querySelectorAll('.strength-bar').forEach(bar => {
                bar.style.width = ((score + 1) * 20) + '%';
                bar.style.backgroundColor = colors[score];
            });
            
            document.querySelectorAll('.strength-text').forEach(text => {
                text.textContent = texts[score];
                text.style.color = colors[score];
            });
        }

        function selectAnswer(answer) {
            // Oltalama sorusu cevabÄ±
            if (answer === 'unsafe') {
                gameScore.phishing = 30; // DoÄŸru cevap
                alert('DoÄŸru! +30 puan');
            } else {
                gameScore.phishing = 10; // YanlÄ±ÅŸ cevap
                alert('YanlÄ±ÅŸ! Bu e-posta sahte. +10 puan');
            }
            
            // Visual feedback
            document.querySelectorAll('.mobile-answer-btn').forEach(btn => {
                btn.style.opacity = '0.5';
            });
            event.target.style.opacity = '1';
            event.target.style.border = '3px solid #00ff00';
        }

        function shareAnswer(item, action) {
            // Gizlilik puanlamasÄ±
            const correctAnswers = {
                phone: 'hide',    // Telefon numarasÄ± saklanmalÄ±
                address: 'hide',  // Adres saklanmalÄ±  
                birthday: 'share' // DoÄŸum tarihi paylaÅŸÄ±labilir
            };
            
            if (correctAnswers[item] === action) {
                gameScore.privacy += 13; // 40/3 â‰ˆ 13 puan
            } else {
                gameScore.privacy += 5;  // YanlÄ±ÅŸ cevap iÃ§in dÃ¼ÅŸÃ¼k puan
            }
            
            // Visual feedback
            event.target.style.backgroundColor = action === 'share' ? '#4CAF50' : '#f44336';
            event.target.style.color = 'white';
            
            // DiÄŸer butonu deaktif et
            const siblings = event.target.parentElement.querySelectorAll('.mobile-btn');
            siblings.forEach(btn => {
                if (btn !== event.target) {
                    btn.style.opacity = '0.3';
                    btn.disabled = true;
                }
            });
        }

        function finishGame() {
            // Toplam skoru hesapla
            gameScore.total = gameScore.password + gameScore.phishing + gameScore.privacy;
            
            // SonuÃ§ ekranÄ±nÄ± gÃ¼ncelle
            document.getElementById('final-score').textContent = gameScore.total;
            document.getElementById('password-score').textContent = `${gameScore.password}/30`;
            document.getElementById('phishing-score').textContent = `${gameScore.phishing}/30`;
            document.getElementById('privacy-score').textContent = `${gameScore.privacy}/40`;
            
            // Firebase'e kaydet
            saveScoreToFirebase();
            
            // SonuÃ§ ekranÄ±na geÃ§
            nextScreen('result-screen');
        }

        function saveScoreToFirebase() {
            const scoreData = {
                name: playerName,
                score: gameScore.total,
                device: 'Mobile',
                date: new Date().toISOString(),
                breakdown: {
                    password: gameScore.password,
                    phishing: gameScore.phishing,
                    privacy: gameScore.privacy
                }
            };
            
            database.ref('scores').push(scoreData)
                .then(() => {
                    console.log('âœ… Mobil skor Firebase\'e kaydedildi');
                })
                .catch((error) => {
                    console.error('âŒ Skor kaydetme hatasÄ±:', error);
                });
        }

        function showScoreboard() {
            loadScoreboard();
            nextScreen('scoreboard-screen');
        }

        function loadScoreboard() {
            database.ref('scores').orderByChild('score').limitToLast(10).once('value')
                .then((snapshot) => {
                    const scores = [];
                    snapshot.forEach((child) => {
                        scores.push(child.val());
                    });
                    
                    scores.reverse(); // En yÃ¼ksek puan Ã¼stte
                    displayScoreboard(scores);
                })
                .catch((error) => {
                    console.error('Skor tablosu yÃ¼kleme hatasÄ±:', error);
                });
        }

        function displayScoreboard(scores) {
            const container = document.getElementById('mobile-scoreboard');
            container.innerHTML = '';
            
            scores.forEach((score, index) => {
                const item = document.createElement('div');
                item.className = 'scoreboard-item';
                item.innerHTML = `
                    <span class="rank">${index + 1}</span>
                    <span class="name">${score.name}</span>
                    <span class="device">${score.device === 'Mobile' ? 'ğŸ“±' : 'ğŸ’»'}</span>
                    <span class="score">${score.score}</span>
                `;
                container.appendChild(item);
            });
        }

        function restartGame() {
            // Oyunu sÄ±fÄ±rla
            gameScore = { password: 0, phishing: 0, privacy: 0, total: 0 };
            playerName = '';
            
            // Form alanlarÄ±nÄ± temizle
            document.getElementById('mobile-player-name').value = '';
            document.getElementById('mobile-password1').value = '';
            document.getElementById('mobile-password2').value = '';
            
            // ButonlarÄ± sÄ±fÄ±rla
            document.querySelectorAll('.mobile-btn').forEach(btn => {
                btn.style.opacity = '1';
                btn.style.border = '';
                btn.style.backgroundColor = '';
                btn.disabled = false;
            });
            
            // Ä°lk ekrana dÃ¶n
            nextScreen('start-screen');
        }

        // Sayfa yÃ¼klendiÄŸinde
        window.addEventListener('load', function() {
            console.log('ğŸ“± Mobil oyun yÃ¼klendi');
            
            // Touch feedback
            document.addEventListener('touchstart', function(e) {
                if (e.target.classList.contains('mobile-btn')) {
                    e.target.style.transform = 'scale(0.95)';
                }
            });
            
            document.addEventListener('touchend', function(e) {
                if (e.target.classList.contains('mobile-btn')) {
                    e.target.style.transform = 'scale(1)';
                }
            });
        });
    </script>
</body>
</html> 